// Copyright (c) 2013 Amazon.com, Inc.  All rights reserved.

(use '/fusion/base')
(use check)

// Test that we can import a name that's already defined.
//  That's legal at top-level, but not at module-level
(define dupe 3)

(define (d_local) dupe)

(use '/module/dupe1')
(define (d1) dupe)

(check = dupe 1)
(check = (d1) 1)
(check = (d_local) 3)

(use '/module/dupe2')
(define (d2) dupe)

(check = dupe 2)
(check = (d1) 1)
(check = (d2) 2)
(check = (d_local) 3)

(define dupe 4)
(check = dupe 4)
(check = (d1) 1)
(check = (d2) 2)
(check = (d_local) 4)

(define dupe 5)
(check = dupe 5)
(check = (d_local) 5)

(use '/module/dupe2')
(check = dupe 2)
(check = (d1) 1)
(check = (d2) 2)
(check = (d_local) 5)
