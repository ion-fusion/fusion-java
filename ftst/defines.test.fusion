// Copyright (c) 2012-2016 Amazon.com, Inc.  All rights reserved.

(require
  "/defpub_use"
  "/fusion/experimental/check"
  )

// Exported variable defined via `defpub`
(check === 39 jonny)


(define (thunk) 513)
(check_true (is_procedure thunk))
(check === 513 (thunk))

(define (thunk) 514 515)
(check === 515 (thunk))

(define (thunk) "doc" "body")
(check === "body" (thunk))

(define (thunk) "doc" 516 517)
(check === 517 (thunk))


(define (proc arg) arg)
(check_true (is_procedure proc))
(check === 518 (proc 518))

(define (proc arg) 532 arg)
(check === 533 (proc 533))

(define (proc arg) "doc" arg)
(check === 545 (proc 545))

(define (proc arg) "doc" 546 arg)
(check === 547 (proc 547))

// Duplicate bound names
(expect_syntax_exn
  (define (bad x x) true))
(expect_syntax_exn
  (define (bad x a b c x) true))


// A top-level binding is created after the expr is evaluated.
(expect_syntax_exn
  (define barley barley))

(require "/grain")
(define barley barley)
(check === "soup" barley)
