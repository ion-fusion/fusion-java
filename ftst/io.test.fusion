// Copyright (c) 2013 Amazon.com, Inc.  All rights reserved.

(require
  "/check"
  "/fusion/io")


// This assumes that current_directory is at the project root.
(with_ion_from_file "tst-data/ints.ion"
  (lambda ()
    (check = 0 (read))
    (check = 1 (read))
    (with_ion_from_file "tst-data/hello.ion"
      (lambda ()
        (check = "hello" (read))
        (check_true (is_eof (read)))))
    (check = 2 (read))
    (check = 3 (read))
    (check_true (is_eof (read)))))

// A nice shortcut for reading a single value.
(check = "hello"
  (with_ion_from_file "tst-data/hello.ion" read))

(check_true (is_eof eof))
