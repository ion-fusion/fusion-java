# Generates a dependency review on a pull request based on the result
# of the uploaded dependency graph. Idle waits for secondary workflows
# triggered by the PR to generate, and then submit the graph.
#
# See: https://github.com/gradle/actions/blob/main/docs/dependency-submission.md#usage-with-pull-requests-from-public-forked-repositories
name: PR Review Dependency Graph

on:
  pull_request:
    branches:
      - 'main'

permissions:
  contents: read

jobs:
  dependency-review:
    runs-on: ubuntu-latest
    steps:
    - name: 'Dependency Review'
      uses: actions/dependency-review-action@v4
      with:
        retry-on-snapshot-warnings: true
        # This is the time, in seconds, that the workflow will wait
        # for the graph to be generated by the other workflows.
        # It must be longer than their total expected runtime.
        retry-on-snapshot-warnings-timeout: 600
